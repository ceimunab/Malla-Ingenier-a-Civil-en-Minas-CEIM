
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla CEIM 2025</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #fdfdfd; padding: 20px; color: #333; margin: 0; }
    h1 { text-align: center; }
    .logo { text-align: center; margin-bottom: 20px; }
    .logo img { max-height: 100px; }
    .malla { display: grid; grid-template-columns: repeat(10, minmax(180px, 1fr)); gap: 10px; overflow-x: auto; }
    .semestre { background: #f0f0f0; border-radius: 10px; padding: 10px; }
    .semestre h3 { text-align: center; }
    .asignatura { background: #fff; border: 1px solid #ccc; border-radius: 6px; margin: 5px 0; padding: 6px 10px; cursor: pointer; position: relative; user-select: none; }
    .asignatura.aprobada { background: #b8e0c0; text-decoration: line-through; }
    .asignatura.bloqueada { background: #eee; cursor: not-allowed; color: #aaa; }
    .asignatura:hover::after { content: attr(data-tooltip); position: absolute; bottom: 100%; left: 0; background: #333; color: #fff; padding: 5px; border-radius: 5px; white-space: nowrap; font-size: 12px; display: block; }
  </style>
</head>
<body>
  <div class="logo">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXAAAADICAMAAAC3SZt3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAxQTFRF////AAAA////////////////////rjGc6gAAABx0Uk5T//////////////////////////////////////////////////////////////////////////////////////////ALWZ90kAAAYoSURBVHja7N1BbuMwDAXQuWz///a1m8iAlNYMN8prchG4zcDiTF+n39/v6TvhUsvjliOBZDLsAANwsEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEgoFnBsm/gFwDZm4AA3JMG7EJncAxA7MZydSSZ9AWJv3UzAFUthYcClC63FYyoHV2EpRZ3oc3x0rPcwC9l1XmbVgsurhYkOgVDNcFK/feyNSaT98epG2iUM3DrWc8C4ljz42ZVbVaLdeiwADZzCeFZWjV16CVAYy2pobI6Vlr3oelNBaM10O1WsDkuq6AjKcNwI3t5X0V3wAz66bqH3y8pAPlcOT4aOxE19Ud0c74gEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEAoEgk+g/wBjMzTjyZoz7QAAAABJRU5ErkJggg==" alt="Logo CEIM">
  </div>
  <h1>Malla Curricular Interactiva - Ingeniería Civil en Minas 2025</h1>
  <div class="malla" id="malla"></div>

  <script>
    const malla = {
      'Semestre I': [
        { id: 'intro_mate', nombre: 'Introducción a las Matemáticas' },
        { id: 'fisica_gral', nombre: 'Física General' },
        { id: 'intro_inge', nombre: 'Introducción a la Ingeniería' },
        { id: 'intro_prog', nombre: 'Introducción a la Programación' },
      ],
      'Semestre II': [
        { id: 'calc_diff', nombre: 'Cálculo Diferencial', requisitos: ['intro_mate'] },
        { id: 'fisica_exp', nombre: 'Física Experimental', requisitos: ['fisica_gral', 'intro_mate'] },
        { id: 'comunicativas', nombre: 'Habilidades Comunicativas' },
        { id: 'bd', nombre: 'Base de Datos', requisitos: ['intro_prog'] },
        { id: 'geo1', nombre: 'Geología I' },
      ],
      'Semestre III': [
        { id: 'mecanica', nombre: 'Mecánica', requisitos: ['fisica_exp', 'calc_diff'] },
        { id: 'calc_int', nombre: 'Cálculo Integral', requisitos: ['calc_diff'] },
        { id: 'compliance', nombre: 'Compliance & Accountability', requisitos: ['intro_inge'] },
        { id: 'quimica', nombre: 'Química y Ambiente' },
        { id: 'geo2', nombre: 'Geología II', requisitos: ['geo1'] },
      ],
      'Semestre IV': [
        { id: 'mineria_energia', nombre: 'Minería y Energía', requisitos: ['mecanica', 'calc_int'] },
        { id: 'metodos_cuant', nombre: 'Métodos Cuantitativos', requisitos: ['calc_int'] },
        { id: 'ingles1', nombre: 'Inglés I' },
        { id: 'integrador1', nombre: 'Integrador I: Práctica I', requisitos: ['geo2', 'quimica', 'compliance', 'mecanica', 'calc_int'] },
        { id: 'eval_yac', nombre: 'Evaluación de Yacimientos', requisitos: ['geo2'] },
      ],
      'Semestre V': [
        { id: 'edo', nombre: 'Ecuaciones Diferenciales', requisitos: ['calc_int'] },
        { id: 'ingles2', nombre: 'Inglés II', requisitos: ['ingles1'] },
        { id: 'rocas', nombre: 'Mecánica de Rocas', requisitos: ['geo2', 'mecanica'] },
        { id: 'conminucion', nombre: 'Conminución', requisitos: ['geo2'], correquisitos: ['perfo_trona'] },
        { id: 'perfo_trona', nombre: 'Perforación y Tronadura', requisitos: ['eval_yac'] },
      ],
      'Semestre VI': [
        { id: 'min_datos', nombre: 'Minería de Datos', requisitos: ['bd', 'metodos_cuant'] },
        { id: 'ingles3', nombre: 'Inglés III', requisitos: ['ingles2'] },
        { id: 'innova1', nombre: 'Taller de Innovación I', requisitos: ['intro_inge'] },
        { id: 'conc_mins', nombre: 'Concentración de Minerales', requisitos: ['conminucion'] },
        { id: 'carg_trans', nombre: 'Carguío y Transporte', requisitos: ['perfo_trona'] },
      ],
      'Semestre VII': [
        { id: 'transformacion_digital', nombre: 'Gestión Transformación Digital', requisitos: ['compliance'] },
        { id: 'ingles4', nombre: 'Inglés IV', requisitos: ['ingles3'] },
        { id: 'innova2', nombre: 'Taller de Innovación II', requisitos: ['innova1'] },
        { id: 'piromet', nombre: 'Pirometalurgia', requisitos: ['conc_mins'] },
        { id: 'metodos_explo', nombre: 'Métodos de Explotación', requisitos: ['carg_trans'] },
      ],
      'Semestre VIII': [
        { id: 'resp_social', nombre: 'Responsabilidad Social' },
        { id: 'integrador2', nombre: 'Integrador II', requisitos: ['piromet', 'metodos_explo'] },
        { id: 'innova3', nombre: 'Taller de Innovación III', requisitos: ['innova2'] },
        { id: 'hidromet', nombre: 'Hidrometalurgia', requisitos: ['conc_mins'] },
        { id: 'planificacion', nombre: 'Planificación Minera', requisitos: ['metodos_explo'] },
      ],
      'Semestre IX': [
        { id: 'ventilacion', nombre: 'Ventilación', requisitos: ['metodos_explo'] },
        { id: 'portafolio', nombre: 'Portafolio de Proyectos', requisitos: ['metodos_explo', 'hidromet'] },
        { id: 'economia', nombre: 'Economía y Comercialización', requisitos: ['metodos_explo'] },
        { id: 'practica2', nombre: 'Práctica II', requisitos: ['integrador1'] },
        { id: 'medio_ambiente', nombre: 'Medio Ambiente y Legislación', requisitos: ['planificacion', 'carg_trans'] },
      ],
      'Semestre X': [
        { id: 'topico1', nombre: 'Tópico de Especialidad I', requisitos: ['planificacion', 'transformacion_digital'] },
        { id: 'topico2', nombre: 'Tópico de Especialidad II', requisitos: ['medio_ambiente'] },
        { id: 'integrador3', nombre: 'Proyecto de Título', requisitos: ['portafolio'] },
        { id: 'topico3', nombre: 'Tópico de Especialidad III', requisitos: ['economia', 'medio_ambiente'] },
        { id: 'seguridad', nombre: 'Seguridad y Salud Ocupacional', requisitos: ['medio_ambiente'] },
      ]
    };

    const progreso = JSON.parse(localStorage.getItem('malla_ceim_2025') || '{}');

    function renderMalla() {
      const contenedor = document.getElementById('malla');
      contenedor.innerHTML = '';

      Object.entries(malla).forEach(([semestre, ramos]) => {
        const col = document.createElement('div');
        col.className = 'semestre';
        col.innerHTML = `<h3>${semestre}</h3>`;

        ramos.forEach(ramo => {
          const div = document.createElement('div');
          div.className = 'asignatura';
          div.textContent = ramo.nombre;

          const requisitos = (ramo.requisitos || []).concat(ramo.correquisitos || []);
          const bloqueada = requisitos.some(id => !progreso[id]);

          if (bloqueada) {
            div.classList.add('bloqueada');
            div.dataset.tooltip = 'Requiere: ' + requisitos.filter(r => !progreso[r]).map(id => {
              for (let s in malla) {
                const curso = malla[s].find(c => c.id === id);
                if (curso) return curso.nombre;
              }
              return id;
            }).join(', ');
          } else {
            div.onclick = () => {
              progreso[ramo.id] = !progreso[ramo.id];
              localStorage.setItem('malla_ceim_2025', JSON.stringify(progreso));
              renderMalla();
            };
            if (progreso[ramo.id]) div.classList.add('aprobada');
          }

          col.appendChild(div);
        });
        contenedor.appendChild(col);
      });
    }

    renderMalla();
  </script>
</body>
</html>
